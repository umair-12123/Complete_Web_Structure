<!-- <?php
$skuSearchTerm = isset($_GET['search']) ? trim($_GET['search']) : '';

$products = [];
if ($skuSearchTerm) {
    $products = $block->getProductsBySku($skuSearchTerm); // Ensure this function is implemented in your block class
}
?>

<style>
.sku-search-container {
    margin: 20px;
}
.search-bar {
    margin-bottom: 10px;
}
.search-bar-inn {
    padding: 8px;
    width: 250px;
}
.search-button {
    padding: 8px 16px;
}
.product-list {
    margin-top: 20px;
}
.product-item {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
}
.product-image {
    width: 100px;
    height: 100px;
    margin-right: 15px;
}
.product-info {
    flex-grow: 1;
}
.product-name {
    font-weight: bold;
    margin-bottom: 5px;
}
.product-sku {
    font-size: 14px;
    color: #555;
}
.no-results {
    margin-top: 20px;
    color: red;
}
</style>

<div class="sku-search-container">
    <div class="search-bar">
        <input class="search-bar-inn" type="text" placeholder="Search by SKU" value="<?= htmlspecialchars($skuSearchTerm) ?>" />
        <button class="search-button">Search</button>
    </div>

    <div class="product-list"></div>
</div>

<script type="text/javascript">
    require(['jquery'], function($) {
        $(document).ready(function() {
            var customUrl = '<?= $block->getUrl('orderscanner/custom/OrderSearch') ?>';
            $('.search-button').on('click', function() {
                performSearch();
            });

            $('.search-bar-inn').on('keypress', function(e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });

            function performSearch() {
                var searchTerm = $('.search-bar-inn').val().trim();
                if (searchTerm) {
                    $.ajax({
                        url: customUrl,
                        type: 'GET',
                        data: { sku: searchTerm },
                        success: function(data) {
                            renderProducts(data);
                        },
                        error: function(jqXHR, textStatus, errorThrown) {
                            console.log("Error details: ", textStatus, errorThrown, jqXHR.responseText);
                            $('.product-list').html('<div class="no-results">Error occurred while searching for products.</div>');
                        }
                    });
                }
            }

            function renderProducts(products) {
                var productList = $('.product-list');
                productList.empty();
                if (products.length > 0) {
                    $.each(products, function(index, product) {
                        var productItem = '<div class="product-item">' +
                            '<img class="product-image" src="' + product.image_url + '" alt="' + product.name + '" />' +
                            '<div class="product-info">' +
                            '<div class="product-name">' + product.name + '</div>' +
                            '<div class="product-sku">SKU: ' + product.sku + '</div>' +
                            '</div></div>';
                        productList.append(productItem);
                    });
                } else {
                    productList.append('<div class="no-results">No products found for SKU: ' + $('.search-bar-inn').val() + '</div>');
                }
            }
        });
    });
</script> -->
